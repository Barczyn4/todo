// Generated by CoffeeScript 1.3.3
var existsSync, fs, path, spawn;

fs = require('fs');

path = require('path');

spawn = require('child_process').spawn;

if (fs.existsSync) {
  exports.existsSync = existsSync = fs.existsSync;
  exports.exists = fs.exists;
} else {
  exports.existsSync = existsSync = path.existsSync;
  exports.exists = path.exists;
}

exports.exec = function(args, callback) {
  var cmd, proc, serial;
  serial = function(arr) {
    var complete, iterate;
    complete = 0;
    iterate = function() {
      return exports.exec(arr[complete], function() {
        complete += 1;
        if (complete === arr.length) {

        } else {
          return iterate();
        }
      });
    };
    iterate();
    if (typeof opts === 'function') {
      return callback = opts;
    }
  };
  if (Array.isArray(args)) {
    return serial(args);
  }
  args = args.split(/\s+/g);
  cmd = args.shift();
  proc = spawn(cmd, args);
  proc.stdout.on('data', function(data) {
    return process.stdout.write(data);
  });
  proc.stderr.on('data', function(data) {
    return process.stderr.write(data);
  });
  return proc.on('exit', function(code) {
    if (typeof callback === 'function') {
      return callback(null, code);
    }
  });
};
